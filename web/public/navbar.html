
<nav class="navbar navbar-expand-lg navbar-light bg-light">

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#expanded-nav">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="expanded-nav">

    <div class="navbar-nav" id="auth-nav">
      <a class="nav-item nav-link" href="/stability.html">Home</a>
      <a class="nav-item nav-link" href="/about.html">About</a>
      <a class="nav-item nav-link" href="/contact.html">Contact</a>
      <!--a class="nav-item nav-link" href="/register_device.html">Register Device</a-->
      <!--a class="nav-item nav-link" href="/send_command.html">Send Command</a-->
      <!--a class="nav-item nav-link" href="/about.html">About</a-->
    </div>


  </div>
  <div>
  <ul class="nav navbar-nav navbar-right" id="right_nav">

 </ul>
</div>
</nav>

<script>


/*
function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.

  window.location.href = 'http://localhost:3000/map.html';

}*/

function signOut() {
  var auth2 = gapi.auth2.getAuthInstance();
  auth2.signOut().then(function () {
    console.log('User signed out.');
  });
}


gapi.load('auth2', function() {

  gapi.auth2.init({

    client_id: '474899306713-i5jjpa4mg8ppbcfqcpsehn430q727epi.apps.googleusercontent.com',

  }).then(function(){

    auth2 = gapi.auth2.getAuthInstance();
    console.log(auth2.isSignedIn.get()); //now this always returns correctly
    const isSignedIn = auth2.isSignedIn.get();
    const logoutElement =  '<li id="logout_button"><a href="/login.html" onClick="signOut();"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>'

    if (isSignedIn) {
      $('#right_nav').append(logoutElement);
    }
  });
});

</script>
